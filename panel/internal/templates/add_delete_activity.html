{{ define "activities.html" }}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{.Title}}</title>
  <link rel="stylesheet" href="/static/css/activity.css">
</head>
<body>
  <div class="admin-container">

    <aside class="sidebar">
      <h2 class="sidebar-title">Admin Panel</h2>
      <nav class="sidebar-nav">
        <a href="/dashboard" class="nav-link">Dashboard</a>
        <a href="/dashboard/activities" class="nav-link active">Activities</a>
        <a href="/api/logout" class="nav-link logout">Logout</a>
      </nav>
    </aside>

    <main class="main-content">
      <header class="main-header">
        <h1>Activities</h1>
      </header>

      <section class="card">
        <table class="activity-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Message ID</th>
              <th>Title</th>
              <th>Prompt ID</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {{ range .Data }}
            <tr id="row-{{ .ID }}">
              <td>{{ .ID }}</td>
              <td class="view">{{ .MessageID }}</td>
              <td class="view">{{ .Title }}</td>
              <td class="view">{{ if .PromptMessageID }}{{ .PromptMessageID }}{{ else }}â€”{{ end }}</td>
              <td>
                <button class="btn btn-edit" onclick="toggleEdit(`{{ .ID }}`)">Edit</button>
                <button class="btn btn-delete" onclick="openDeleteModal(`{{ .ID }}`)">Delete</button>
                <a href="/dashboard/activities/{{.ID}}/supporters" class="btn btn-view">Supporters</a>
              </td>
            </tr>
            {{ else }}
            <tr>
              <td colspan="5">No activities found.</td>
            </tr>
            {{ end }}
          </tbody>
        </table>
      </section>

      <section class="card form-card">
        <h2>Add Activity</h2>
        <form id="addForm" method="post" action="/dashboard/activities/">
          <label>Message ID</label>
          <input type="number" name="message_id" required>

          <label>Title</label>
          <input type="text" name="title" required>

          <label>Prompt ID (optional)</label>
          <input type="number" name="prompt_message_id">

          <button type="submit" class="btn btn-primary">Add Activity</button>
        </form>
      </section>
    </main>
  </div>

  <div class="modal-overlay" id="deleteModal">
    <div class="modal">
      <h2>Are you sure you want to delete this activity?</h2>
      <div class="modal-actions">
        <button class="btn cancel-btn" id="cancelDelete">Cancel</button>
        <button class="btn confirm-btn" id="confirmDelete">Delete</button>
      </div>
    </div>
  </div>


  <script src="/static/js/activity.js"></script>
</body>
</html>
{{ end }}
